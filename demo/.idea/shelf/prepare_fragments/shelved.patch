Index: app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/DetailsFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/DetailsFragment.java	(date 1539208709398)
+++ app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/DetailsFragment.java	(date 1539208709398)
@@ -0,0 +1,36 @@
+package ru.spbstu.icc.kspt.andrei.mydemoapplication;
+
+import android.app.Fragment;
+import android.os.Bundle;
+import android.support.annotation.Nullable;
+import android.util.Log;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.TextView;
+
+public class DetailsFragment extends Fragment {
+
+    public static final String EXTRA_DETAILS = "details";
+
+    @Nullable
+    @Override
+    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) {
+        return inflater.inflate(R.layout.panel_details, container, false);
+    }
+
+    @Override
+    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
+        super.onActivityCreated(savedInstanceState);
+        if (getArguments() != null) {
+            int item = getArguments().getInt(EXTRA_DETAILS, 0);
+            setContentItem(item);
+        }
+    }
+
+    public void setContentItem(int contentItem) {
+        Log.i("fragment_details", String.valueOf(contentItem));
+        TextView details = getActivity().findViewById(R.id.details_text);
+        details.setText(getString(R.string.item_selected, contentItem));
+    }
+}
Index: app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/ListFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/ListFragment.java	(date 1539208470659)
+++ app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/ListFragment.java	(date 1539208470659)
@@ -0,0 +1,44 @@
+package ru.spbstu.icc.kspt.andrei.mydemoapplication;
+
+import android.app.Fragment;
+import android.content.Context;
+import android.os.Bundle;
+import android.support.annotation.Nullable;
+import android.util.Log;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+
+public class ListFragment extends Fragment {
+    public interface ListListener {
+        void itemSelected(int item);
+    }
+
+    private ListListener listener;
+
+    @Nullable
+    @Override
+    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) {
+        return inflater.inflate(R.layout.panel_list, container, false);
+    }
+
+    @Override
+    public void onAttach(Context context) {
+        super.onAttach(context);
+        listener = (ListListener) context;
+    }
+
+    @Override
+    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
+        super.onActivityCreated(savedInstanceState);
+        getActivity().findViewById(R.id.list_item_1).setOnClickListener(v -> itemSelected(1));
+        getActivity().findViewById(R.id.list_item_2).setOnClickListener(v -> itemSelected(2));
+    }
+
+    private void itemSelected(int item) {
+        Log.i("fragment_list", String.valueOf(item));
+        if (listener != null) {
+            listener.itemSelected(item);
+        }
+    }
+}
Index: app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/MyNewActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.spbstu.icc.kspt.andrei.mydemoapplication;\n\nimport android.app.Activity;\nimport android.content.Intent;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.support.annotation.Nullable;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\n\npublic class MyNewActivity extends Activity {\n\n    public static final String LIFECYCLE = \"lifecycle\";\n    public static final String KEY_COUNTER = \"counter\";\n\n    private int counter = 0;\n\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n        outState.putInt(KEY_COUNTER, counter);\n    }\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        this.setContentView(R.layout.test);\n\n        if (savedInstanceState != null) {\n            counter = savedInstanceState.getInt(KEY_COUNTER);\n        }\n\n        Button bn = findViewById(R.id.button);\n        if (bn != null) {\n            bn.setOnClickListener(this::myBnClicked);\n            refreshBnText(bn);\n        }\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        Log.i(LIFECYCLE, \"onStart\");\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Log.i(LIFECYCLE, \"onResume\");\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        Log.i(LIFECYCLE, \"onPause\");\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        Log.i(LIFECYCLE, \"onStop\");\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        Log.i(LIFECYCLE, \"onDestroy\");\n    }\n\n    public void myBnClicked(View view) {\n        Button bn = (Button) view;\n        counter++;\n        refreshBnText(bn);\n\n        Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse(\"tel:123\"));\n        startActivity(intent);\n    }\n\n    private void refreshBnText(Button bn) {\n        String title = getResources().getString(R.string.title_click_count, counter);\n        bn.setText(title);\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/MyNewActivity.java	(date 1539201637000)
+++ app/src/main/java/ru/spbstu/icc/kspt/andrei/mydemoapplication/MyNewActivity.java	(date 1539213669872)
@@ -1,6 +1,8 @@
 package ru.spbstu.icc.kspt.andrei.mydemoapplication;
 
 import android.app.Activity;
+import android.app.Fragment;
+import android.app.FragmentTransaction;
 import android.content.Intent;
 import android.net.Uri;
 import android.os.Bundle;
@@ -9,13 +11,17 @@
 import android.view.View;
 import android.widget.Button;
 
-public class MyNewActivity extends Activity {
+public class MyNewActivity extends Activity implements ListFragment.ListListener {
 
     public static final String LIFECYCLE = "lifecycle";
     public static final String KEY_COUNTER = "counter";
+    public static final String DETAILS_TAG = "details2";
+    public static final String LIST_TAG = "list2";
 
     private int counter = 0;
 
+    private Integer item = null;
+
     @Override
     protected void onSaveInstanceState(Bundle outState) {
         super.onSaveInstanceState(outState);
@@ -31,10 +37,17 @@
             counter = savedInstanceState.getInt(KEY_COUNTER);
         }
 
-        Button bn = findViewById(R.id.button);
-        if (bn != null) {
-            bn.setOnClickListener(this::myBnClicked);
-            refreshBnText(bn);
+        if (findViewById(R.id.fragment_holder) != null) {
+            Fragment listFragment = getFragmentManager().findFragmentByTag(LIST_TAG);
+            if (listFragment == null) {
+                FragmentTransaction tx = getFragmentManager().beginTransaction();
+                tx.replace(R.id.fragment_holder, new ListFragment(), LIST_TAG);
+                tx.commit();
+            } else if (listFragment.isAdded() == false) {
+                FragmentTransaction tx = getFragmentManager().beginTransaction();
+                tx.replace(R.id.fragment_holder, listFragment, LIST_TAG);
+                tx.commit();
+            }
         }
     }
 
@@ -81,4 +94,30 @@
         String title = getResources().getString(R.string.title_click_count, counter);
         bn.setText(title);
     }
+
+    @Override
+    public void itemSelected(int item) {
+        DetailsFragment details = (DetailsFragment) getFragmentManager().findFragmentByTag(DETAILS_TAG);
+        if (findViewById(R.id.fragment_holder) != null) {
+//            Intent i = new Intent(this, DetailsActivity.class);
+//            i.putExtra(DetailsActivity.EXTRA_DETAILS, item);
+//            startActivity(i);
+            FragmentTransaction tx = getFragmentManager().beginTransaction();
+            if (details == null) {
+                details = new DetailsFragment();
+                Bundle args = new Bundle();
+                args.putInt(DetailsFragment.EXTRA_DETAILS, item);
+                details.setArguments(args);
+            } else {
+                tx.remove(details).commit();
+                getFragmentManager().executePendingTransactions();
+                tx = getFragmentManager().beginTransaction();
+            }
+            tx.replace(R.id.fragment_holder, details, DETAILS_TAG);
+            tx.addToBackStack(null);
+            tx.commit();
+        } else if (details != null && details.isVisible()) {
+            details.setContentItem(item);
+        }
+    }
 }
Index: app/src/main/res/layout/activity_details.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_details.xml	(date 1539206242228)
+++ app/src/main/res/layout/activity_details.xml	(date 1539206242228)
@@ -0,0 +1,11 @@
+<?xml version="1.0" encoding="utf-8"?>
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent">
+
+    <fragment
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:id="@+id/details_fragment"
+        android:name="ru.spbstu.icc.kspt.andrei.mydemoapplication.DetailsFragment"/>
+</FrameLayout>
\ No newline at end of file
Index: app/src/main/res/layout/panel_details.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/panel_details.xml	(date 1539205760828)
+++ app/src/main/res/layout/panel_details.xml	(date 1539205760828)
@@ -0,0 +1,24 @@
+<?xml version="1.0" encoding="utf-8"?>
+<android.support.constraint.ConstraintLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent">
+
+    <TextView
+        android:id="@+id/details_text"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginBottom="8dp"
+        android:layout_marginEnd="8dp"
+        android:layout_marginLeft="8dp"
+        android:layout_marginRight="8dp"
+        android:layout_marginStart="8dp"
+        android:layout_marginTop="8dp"
+        android:text="TextView"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent" />
+</android.support.constraint.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/panel_list.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/panel_list.xml	(date 1539202971903)
+++ app/src/main/res/layout/panel_list.xml	(date 1539202971903)
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    android:orientation="vertical">
+
+    <Button
+        android:id="@+id/list_item_1"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:text="Button" />
+
+    <Button
+        android:id="@+id/list_item_2"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:text="Button" />
+</LinearLayout>
\ No newline at end of file
Index: app/src/main/res/layout/test.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@drawable/gradient\"\n    >\n\n    <Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"110dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        android:text=\"Button\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</android.support.constraint.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/test.xml	(date 1539201637000)
+++ app/src/main/res/layout/test.xml	(date 1539207393702)
@@ -1,26 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
-<android.support.constraint.ConstraintLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
+    android:id="@+id/fragment_holder"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    android:background="@drawable/gradient"
-    >
+    android:background="@drawable/gradient">
 
-    <Button
-        android:id="@+id/button"
-        android:layout_width="110dp"
-        android:layout_height="wrap_content"
-        android:layout_marginBottom="8dp"
-        android:layout_marginEnd="8dp"
-        android:layout_marginLeft="8dp"
-        android:layout_marginRight="8dp"
-        android:layout_marginStart="8dp"
-        android:layout_marginTop="8dp"
-        android:text="Button"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toTopOf="parent" />
-</android.support.constraint.ConstraintLayout>
\ No newline at end of file
+</FrameLayout>
\ No newline at end of file
Index: app/src/main/res/layout-land/test.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n    <ProgressBar\n        android:id=\"@+id/progressBar\"\n        style=\"?android:attr/progressBarStyleHorizontal\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</android.support.constraint.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout-land/test.xml	(date 1539201637000)
+++ app/src/main/res/layout-land/test.xml	(date 1539213640583)
@@ -6,14 +6,35 @@
     android:layout_width="match_parent"
     android:layout_height="match_parent">
 
-    <ProgressBar
-        android:id="@+id/progressBar"
-        style="?android:attr/progressBarStyleHorizontal"
+    <fragment
+        android:id="@+id/list_fragment"
+        android:tag="list"
+        android:name="ru.spbstu.icc.kspt.andrei.mydemoapplication.ListFragment"
         android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
+        android:layout_height="0dp"
+        android:layout_marginBottom="8dp"
         android:layout_marginLeft="8dp"
         android:layout_marginStart="8dp"
         android:layout_marginTop="8dp"
+        app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintStart_toStartOf="parent"
         app:layout_constraintTop_toTopOf="parent" />
+
+
+    <fragment
+        android:id="@+id/details_fragment"
+        android:tag="details"
+        android:name="ru.spbstu.icc.kspt.andrei.mydemoapplication.DetailsFragment"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        android:layout_marginBottom="8dp"
+        android:layout_marginEnd="8dp"
+        android:layout_marginLeft="8dp"
+        android:layout_marginRight="8dp"
+        android:layout_marginStart="8dp"
+        android:layout_marginTop="8dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toEndOf="@+id/list_fragment"
+        app:layout_constraintTop_toTopOf="parent" />
 </android.support.constraint.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\n    <string name=\"app_name\">My demo application</string>\n    <string name=\"action_settings\">Settings</string>\n    <string name=\"hello_world\">Hello world!</string>\n    <string name=\"start\">Start</string>\n    <string name=\"title_click_count\">Clicked count: %d</string>\n</resources>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/strings.xml	(date 1539201637000)
+++ app/src/main/res/values/strings.xml	(date 1539205760782)
@@ -4,4 +4,5 @@
     <string name="hello_world">Hello world!</string>
     <string name="start">Start</string>
     <string name="title_click_count">Clicked count: %d</string>
+    <string name="item_selected">Item selected: %d</string>
 </resources>
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"ru.spbstu.icc.kspt.andrei.mydemoapplication\">\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\">\n        <activity\n            android:name=\".MainActivity\"\n            android:label=\"@string/app_name\"\n            android:theme=\"@style/AppTheme.NoActionBar\">\n\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n\n        <activity android:name=\".MyNewActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n    </application>\n\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(date 1539201637000)
+++ app/src/main/AndroidManifest.xml	(date 1539209257073)
@@ -23,9 +23,12 @@
         <activity android:name=".MyNewActivity">
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
+
                 <category android:name="android.intent.category.LAUNCHER" />
+                <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
+
     </application>
 
 </manifest>
\ No newline at end of file
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/vcs.xml	(date 1539201664628)
+++ .idea/vcs.xml	(date 1539201664628)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="VcsDirectoryMappings">
+    <mapping directory="$PROJECT_DIR$" vcs="Git" />
+  </component>
+</project>
\ No newline at end of file
